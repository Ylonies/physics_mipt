# M4  
**Шар на столе** — численное моделирование поступательного и вращательного движения шара по шероховатой поверхности с сухим трением.

Моделируются два типа задач:  
1. **Наклонная плоскость:** скатывание без проскальзывания или с возможным переходом в режим проскальзывания.  
2. **Горизонтальная плоскость:** произвольное качение под действием постоянной горизонтальной силы.

---

## Физическая модель

Рассматривается однородный шар массы $m$ и радиуса $R$.  

Момент инерции относительно центра:

$$
I = \frac{2}{5} m R^2
$$

На шар действуют следующие силы:

- Сила тяжести $m g$  
- Сила реакции опоры  
- Сила сухого трения (модуль не превышает $\mu m g$)  
- При необходимости внешняя сила $F$, приложенная к центру шара (для горизонтальной плоскости)

### 1. Наклонная плоскость

- При малом трении реализуется скольжение, при достаточном — чистое качение.  
- Движение моделируется вдоль оси наклона.

### 2. Горизонтальная плоскость

- К центру шара приложена постоянная горизонтальная сила $F$.  
- Возможен переход между режимами качения и скольжения в зависимости от коэффициента трения $\mu$.

---

## Входные параметры

### Общие параметры

| Параметр                        | Ограничения        | Обоснование                                              |
| ------------------------------- | ------------------ | -------------------------------------------------------- |
| Масса шара $m$ (кг)             | $0 < m \le 1000$   | Масса должна быть положительной и физически реалистичной |
| Радиус шара $R$ (м)             | $0 < R \le 10$     | Радиус положителен и имеет разумные размеры              |
| Коэффициент сухого трения $\mu$ | $0 \le \mu \le 10$ | Трение не может быть отрицательным и чрезмерно большим   |

---

### 1. Наклонная плоскость (режимы 1 и 1b)

| Параметр                                       | Ограничения                   | Обоснование                         |
| ---------------------------------------------- | ----------------------------- | ----------------------------------- |
| Угол наклона $\alpha$ (°)                      | $0 \le \alpha \le 90$         | Угол наклона относительно горизонта |
| Начальная скорость вдоль плоскости $v_0$ (м/с) | $0 \le v_0 \le 300$           | Реалистичные скорости               |
| Начальная угловая скорость $\omega_0$ (рад/с)  | $0 \le \omega_0 \le 300$      | Реалистичные угловые скорости       |
| Время моделирования $t_\mathrm{end}$ (с)       | $0 < t_\mathrm{end} \le 1000$ | Ограничение численной стабильности  |

- Режим *1* — чистое качение без проскальзывания  
- Режим *1b* — возможен переход в скольжение при недостаточном трении

---

### 2. Горизонтальная плоскость (режим 2)

| Параметр                                      | Ограничения                  | Обоснование                        |
| --------------------------------------------- | ---------------------------- | ---------------------------------- |
| Начальная поступательная скорость $v_0$ (м/с) | $0 \le v_0 \le 300$          | Реалистичные скорости              |
| Начальная угловая скорость $\omega_0$ (рад/с) | $0 \le \omega_0 \le 300$     | Реалистичные угловые скорости      |
| Постоянная горизонтальная сила $F$ (Н)        | $-10000 \le F \le 10000$     | Ограничение численной модели       |
| Время моделирования $t_\mathrm{end}$ (с)      | $0 < t_\mathrm{end} \le 100$ | Ограничение численной стабильности |

---

## Формулы и выходные данные

Энергия системы (кинетическая + потенциальная):

$$
E = \frac{1}{2} m v^2 + \frac{1}{2} I \omega^2 + m g h
$$

Индикатор проскальзывания:

$$
v \neq \omega R
$$

Программа вычисляет:

- Координаты и скорости центра шара $(x, y, v_x, v_y)$  
- Угловые скорости $(\omega_x, \omega_y)$  
- Энергию системы $E$  
- Долю времени в режиме скольжения

---

## Запуск модели

Активируйте окружение и выполните:

```bash
uv run python -m src.m4.main
```